language: node_js
node_js:
 - "10.7"
cache:
  yarn: true
  directories:
    - node_modules
env:
 - CONTENT_DIR="CPS_content/"
 - secure: "YC4S+1T/8lopDWBw6xdIOI80LA3d2waza6OXq3jprdPEX4ZB64HrGO/hG+sQDgUYkzrQHn0LPQ9h2fJ2cFyL1fv/NlML7KOFSqxCh9Ar1zEQDTNZ5lM7utiu+dAHnOf/wiNoU8dG6q1KX5S4SqRgbkjZavP4n0mwD4jS7Ap3+utEOLFLZ2+/zxWGWATyi37F+64+Vi7hR8e7Hp9LAPsud1Qd4diBDxOYfiHxrTrD8xUZTfS6B7ZJQk52txilRj8LE/ojrD0dQi/uNCYbtOH8UK+TFbXZ1nbzN3HzpIVBPTWvXsWoc/g8IRSkp5VD3cxWHQ07ugHxZgcW7yKzAyii1dNKn5kHSMxcrDCiNBw9ECQttS00P2Gm+ba1sCqTxrMQDtYQVtrl7n/x7ybPbbXNb5tJmXRdVJCd9XE6tPQm4VWlHJte2q6gTzKV6ZsT0EGfoDIcDqQABcV25uSsNp8VCAdUH03g/Dd789F8RzbpNdMFc6YHpPYps5LLwpgjNEM1KzGp/6kF1p6x+3Zvx1K4DhC2egHsj3X1sW7tVUYs0AIXm060luuhiPSWQby95oyX3JyJPFidBtB+D1uiAXmtz3MmSoB1K/LC1SM7yNxjRyj/vwxFeEEhLfmbU3wA/N9eVRsS8voxTgKU6IPCR2HL4c0p+FeUNsLMmglQeEXdr3s="
before_install:
 - npm install --global gatsby-cli
 - openssl aes-256-cbc -K $encrypted_dbbb8c9e52bb_key -iv $encrypted_dbbb8c9e52bb_iv -in .travis.key.enc -out .travis.key -d
 - chmod 0400 .travis.key
 - GIT_SSH_COMMAND="ssh -i .travis.key" git clone git@github.com:shuttle1987/CPS_content.git
script:
 - gatsby build
deploy:
 provider: s3
 access_key_id:
  secure: "KcPDdvsUor5PswRBxWEi38OznQXsNRX3LdidQngIg5/nYGJJE4EbNyzFxFhUOXh7rmmhl0KeeLwC+zGQR16a2TlBcWrE5y8itM5ShEy6L4s6E3f90iS39W5Aj5/9awq/5JmZazTnKqLB+ouJxmy4eTpDCbY9a0NSNYuDRopuzj0Fc3skDV5e0sJc/4sz8sxvXZRmcNBgNgHFSYklYZjRC4fxx59RHioWtXu/NYkhGlt35n2Kn4Cai5kKuyrilkdqCUx39GQslw/FbVdB/mYkVjPVSyxQcZyK1LbKI5peLVEFduBMAbgeVeTn0+uuNrHxL9NUmOfgMQUqNeR47eFqSovLuZC4DNCy8Duvi5oHNdy+x/ttT6qdkLuphOrkmktViU88T0pH9eOqKjavC6xydso3pkibRv4VnkCIjnu5jcBu5rWwwGtlBKwSF9dem4rncSHr2DUnfVNOmRujXUKlvQCnUvdDsydp/0a9vq8oKXQ4SWTl1UDaua221rEpEh06+z95q7tz1bxkM1maE3Sj211uz3eU1eewPuep40XGvojrYhpkFpa7QPIxlCyhq142eELY8j0oX1VtMCHmBUtTIPtD2OalrSZtkJjxIBVCovn6k5jk4v7a/RJza/2/k50eQbiFXIFJKvehxs+uoQrq1+eE/AR/SwfaIjUB3uVChmw="
 secret_access_key:
  secure: "Kfv1qO7Hg5iJP+P6qqVLkTa3Kfe1QhziAAhL8GFVRQUzqNAooOmH2LxymgHBu0+9cSHOswBkKSqMeQf26mzkG3u8dbUIfzrbfUzqPai90uLsneNMWWLdlF3joyhUU6uyOBsxEX1+NKOmQ4lMa5LHnCStwOsi8mGKoQMFLqkv9QkA3ASdIfCR7mlAQ53e69Px7fgBzgUZz3ANri/NhcBsWd/ps5PIPL+LASPMSnKAqHflhqZ0VXkM7G8Q3onefBeDt3KZBxn1Jy/dMms1scuD5dGR6Wwjq9hP2AwcTZQtPCnprPtYE+Gu5u0Ytcu/MdDFcj4OAj8YK9VyLZBZzwPvfqu2j1iqTUqVJn6lBPDvoITFUpBlt3rU2z9zy4iMvlIxPYoO6JVq4dmQ0gWaNm6QzLxn8UuuGcw+0Mw90rQKOTFzV9vINoYBsFM+VzqeYeEjKo5J23XfYSjTecgieD1/zo3e/I0d4qjZOabKniffnYFGf3MZJvqKCeB/KwDajspdIGFgdvXsEiLnTKxtizmCXF1vOGXc/88b+TZJCFT9irq4R/Xd5AmjzLf74CUgi9sJL5jmIFVx3iYv1h0abrvK032KHyjHSfNLkH0piye7Fbrne2OfYBFpMgke0V6ZrjW3Jhkh78NVc8DDq74Fx/fm9iIXbel8l4m57zYIt/C2poQ="
 bucket: "www.customprogrammingsolutions.com"
 skip_cleanup: true
 local_dir: public
